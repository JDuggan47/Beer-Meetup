<div class="top-bar">
  <div class="top-bar-left">
    <ul class="menu">
      <li class="menu-text">The Beer Social Network!</li>
      <li class="menu-text"><%= link_to 'List of Events', meetups_path %></li>
    </ul>
  </div>
  <div class="top-bar-right">
    <ul class="menu">
      <% if signed_in? %>
        <li class="username"><%= current_user.first_name %> is currently signed in!</li>
        <li class="menu-text"><%= link_to "Sign Out", destroy_user_session_path, :method => :delete %></li>
      <% else %>
        <li><%= link_to "Join", new_user_registration_path %></li>
        <li><%= link_to "Sign In", new_user_session_path %></li>
      <% end %>
    </div>
  </div>
</div>

<div class="text-center">
  <h1>Name: <%= @meetup.title %></h1>
  <h3>Description: <%= @meetup.description %></h3>
  <h3> <img src= '<%= @meetup.image_url %>'> </h3>
  <%= button_to "Click Here To Join!", meetup_users_path(@meetup.id), method: :post, class: 'button'%>
</div>

<div class="large-3 columns large-offset-1 columns">
  <%if @meetup.users.length == 0 %>
    <h3 class="text-center">No one is coming yet! Be the first to join!</h3>
  <% else %>
    <h3 class="text-center">The following guests are coming!</h3>
    <% @members.each do |member| %>
      <div class="card event-beer">
        <h4 class="member-names text-center">Guest: <%= member.username %></h4>
        <h5 class="text-center">Is bringing: <%= member.beers.sample(1)[0].name_of_beer%></h5>
      </div>
    <% end %>
  <% end %>
</div>

<div class="large-6 columns large-offset-1 text-center">
  <div style='width: 800px;'>
    <div id="map" style='width: 800px; height: 400px;'></div>
  </div>

  <script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
      {
        "lat": 0,
        "lng": 0,
        "picture": {
          "url": "http://people.mozilla.com/~faaborg/files/shiretoko/firefoxIcon/firefox-32.png",
          "width":  32,
          "height": 32
        },
        "infowindow": "hello!"
      }
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    });
  </script>
</div>

<script src="//maps.google.com/maps/api/js?<%= ENV['GOOGLE_MAPS_KEY'] %>"</script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script>
